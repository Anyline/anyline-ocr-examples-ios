(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{164:function(t,e,n){t.exports=n(386)},380:function(t,e,n){},384:function(t,e,n){},386:function(t,e,n){"use strict";n.r(e);n(165);var o,r=n(1),i=n.n(r),a=n(61),c=n.n(a),u=n(36),s=n(13),d=n(54),l=n(47),f=n.n(l),p=n(154),h=n.n(p),b=n(8),v=n(157),m=n.n(v),g=n(48),k=n(412);var w=function(){if(o)return o;var t={},e=function(e,n){return t[e]?t[e].next(n):(console.warn("".concat(e," does not have any registered listeners. Publish cancelled.")),!1)};return o={getSinks:function(){return t},publish:e,subscribe:function(e,n){return n?(t[e]||Object.assign(t,Object(g.a)({},e,new k.a)),t[e].subscribe(n)):(console.warn("No callback provided for subscription. Subscription cancelled."),!1)}},window.publish=e,o}(),O=function(t,e){return t.reduce(function(t,n){return Object(s.a)({},t,Object(g.a)({},n[e],n))},{})},C=n(153),j=n(158),F=n.n(j),y=n(55);var E=i.a.lazy(function(){return Promise.all([n.e(3),n.e(1)]).then(n.bind(null,413))}),x=function(){var t;return function(e,n){clearTimeout(t),t=setTimeout(n,e)}}(),M=u.a.div.withConfig({displayName:"Cutout__Wrapper",componentId:"sc-1fys6on-0"})(["position:fixed;border-style:solid;",""],function(t){return"\n        width: ".concat(t.rect.right-t.rect.left,"px;\n        height: ").concat(t.rect.bottom-t.rect.top,"px;\n        top: ").concat(t.rect.top-t.strokeWidth,"px;\n        left: ").concat(t.rect.left-t.strokeWidth,"px;\n        border-radius: ").concat(t.cornerRadius,"px;\n        border-width: ").concat(t.strokeWidth,"px;\n        border-color: ").concat(t.scanning?Object(y.a)(t.feedbackStrokeColor||t.strokeColor):Object(y.a)(t.strokeColor),";\n    ")}),I=function(){return{fade:500,zoom:500}[(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()]||0},S=Object(b.a)(Object(b.g)("show","setShow"),Object(b.g)("scanning","setScanning"),Object(b.b)({rect:{left:0,top:0,right:100,bottom:100},strokeWidth:2,strokeColor:"FFFFFF",cornerRadius:8}),Object(b.f)(function(t){var e=t.scanFeedback;return{renderFeedback:e.elements&&!!e.elements.length}}),Object(b.e)({resetScanTimeout:function(t){var e=t.setScanning,n=t.scanFeedback;return function(){e(!0),x(n.timeout||700,function(){return e(!1)})}}}),Object(b.c)({componentDidMount:function(){this.props.setShow(!0)},componentWillReceiveProps:function(t){t.scanFeedback.lastFeedbackUpdate!==this.props.scanFeedback.lastFeedbackUpdate&&this.props.resetScanTimeout()}}))(function(t){t.show;var e,n,o,a=t.renderFeedback,c=t.scanFeedback,u=Object(C.a)(t,["show","renderFeedback","scanFeedback"]);return i.a.createElement(F.a,Object.assign({timeout:I(u.classNames)},u),i.a.createElement(M,{rect:u.rect,cordnerRadus:u.cordnerRadus,strokeWidth:u.strokeWidth,feedbackStrokeColor:u.feedbackStrokeColor,strokeColor:u.strokeColor,scanning:u.scanning},a&&i.a.createElement(r.Suspense,{fallback:i.a.createElement("span",null)},i.a.createElement(E,{initialRectStyle:(e=u.rect,n=u.strokeWidth,o=u.cornerRadius,{width:e.right-e.left,height:e.bottom-e.top,top:-n,left:-n,borderRadius:o}),hide:!u.scanning,cutoutId:u.id,polygonOffset:{top:u.rect.top,left:u.rect.left},config:c}))))}),W=function(t,e,n){var o=Math.min(t,e)/2;return o<n?o:n};var A,R,P,T,_,z,D=n(161),U=n(162),N=function(){function t(){Object(D.a)(this,t)}return Object(U.a)(t,[{key:"set",value:function(t,e){this[t]=e}}]),t}(),L=Object(b.f)({refs:new N}),B=function(t,e){return Object.keys(e).filter(function(e){return!Object.keys(t).includes(e)})},H=u.a.canvas.withConfig({displayName:"Mask__Canvas",componentId:"sc-5i53g0-0"})(["position:absolute;width:100%;height:100%;"]),q=function(t){return function(e){return t.set("canvas",e)}},J=Object(b.a)(L,Object(b.b)({outerColor:"FFFFFF",outerAlpha:0,onInit:function(){}}),Object(b.e)({initializeMaskService:function(t){var e=t.outerColor,n=t.outerAlpha,o=t.refs.canvas;return function(){o.width=o.offsetWidth,o.height=o.offsetHeight,A=function(t){var e=t.canvasEl,n=t.outerColor,o=void 0===n?"000000":n,r=t.outerAlpha,i=void 0===r?0:r,a=t.rerenderOnAdd,c=void 0===a||a,u=t.rerenderOnRemove,s=void 0===u||u,d={},l=Object(y.b)(o,i),f=e.getContext("2d");function p(t){var e=t.rect,n=t.cornerRadius,o=void 0===n?0:n,r=t.strokeWidth,i=void 0===r?0:r;o<i&&(o=i);var a=e.top,c=e.left,u=e.right-c,s=e.bottom-a,d=c,l=a;o=W(u,s,o),f.beginPath(),f.moveTo(d+o,l-i),f.lineTo(d+u-o+i,l-i),f.arc(d+u-o+i,l+o-i,o,1.5*Math.PI,0),f.lineTo(d+u+i,l+s-o+i),f.arc(d+u-o+i,l+s-o+i,o,0,.5*Math.PI),f.lineTo(d+o-i,l+s+i),f.arc(d+o-i,l+s-o+i,o,.5*Math.PI,Math.PI),f.lineTo(d-i,l+o-i),f.arc(d+o-i,l+o-i,o,Math.PI,1.5*Math.PI),f.closePath(),f.fillStyle="black",f.fill()}function h(t){f.fillStyle=t,f.fillRect(0,0,e.width,e.height)}function b(){f.clearRect(0,0,e.width,e.height),f.globalCompositeOperation="source-over",h(l),f.globalCompositeOperation="destination-out",Object.values(d).forEach(p)}return h(l),function t(){return requestAnimationFrame(t)}(),{addCutout:function(t){d[t.id]=t,c&&b()},modifyCutout:function(t){d[t.id]=t,b()},removeCutout:function(t){delete d[t],s&&b()},render:b,setConfig:function(t,e){l=Object(y.b)(t,e),b()}}}({canvasEl:o,outerColor:e,outerAlpha:n,rerenderOnAdd:!1})}},updateCanvasDimensions:function(t){var e=t.refs.canvas;return function(){e.width=e.offsetWidth,e.height=e.offsetHeight,A&&A.render()}}}),Object(b.c)({componentDidMount:function(){this.props.initializeMaskService(),window.addEventListener("resize",this.props.updateCanvasDimensions),this.props.onInit(A)},componentWillUnmount:function(){window.removeEventListener("resize",this.props.updateCanvasDimensions)},componentWillReceiveProps:function(t){var e=this;return t.outerColor===this.props.outerColor&&t.outerAlpha===this.props.outerAlpha||A&&A.setConfig(t.outerColor,t.outerAlpha),B(this.props.cutouts,t.cutouts).length?(A||t.initializeMaskService(),void Object.values(t.cutouts).filter(function(t){return!e.props.cutouts[t.id]}).forEach(A.addCutout)):B(t.cutouts,this.props.cutouts).length?(A||t.initializeMaskService(),void Object.values(this.props.cutouts).filter(function(e){return!t.cutouts[e.id]}).map(function(t){return t.id}).forEach(A.removeCutout)):void Object.values(t.cutouts).filter(function(t){return e.props.cutouts[t.id]&&t.lastUpdate!==e.props.cutouts[t.id].lastUpdate}).forEach(A.modifyCutout)}}))(function(t){var e=t.refs;return i.a.createElement(H,{ref:q(e)})}),G=(n(380),5),Y=u.a.div.withConfig({displayName:"CutoutManager__Wrapper",componentId:"ri6bt1-0"})(["width:100%;height:100%;"]),Z={cutouts:f.a.object.isRequired};var $=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(t){return Object.keys(t).length})};function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e.length||t.length>1||!t[0].points)return t;if(1===t.length&&1===e.length){var n=Q(e[0].points,{left:0,top:0}),o=Q(t[0].points,{left:0,top:0}),r=n.x,i=n.y,a=n.width,c=n.height,u=o.x,s=o.y,d=o.width,l=o.height;if(Math.abs(r-u)>=G||Math.abs(i-s)>=G||Math.abs(a-d)>=G||Math.abs(c-l)>=G)return t}return e}function Q(t,e){if(!t)return{};var n=t.reduce(function(t,e){var n=Object(d.a)(e,2),o=n[0],r=n[1];return{x1:t.x1&&t.x1<o?t.x1:o,y1:t.y1&&t.y1<r?t.y1:r,x2:t.x2&&t.x2>o?t.x2:o,y2:t.y2&&t.y2>r?t.y2:r}},{});return{x:n.x1-e.left,y:n.y1-e.top,width:n.x2-n.x1,height:n.y2-n.y1}}var V=function(t){return t.visible},X=function(t,e){return e.map(function(e){return Object(s.a)({},e,{svgOffset:{top:t.useSvgOffset?-t.rect.top:0,left:t.useSvgOffset?-t.rect.left:0},x:void 0===e.x?void 0:e.x-t.rect.left-(t.scanFeedback.strokeWidth||2),y:void 0===e.y?void 0:e.y-t.rect.top-(t.scanFeedback.strokeWidth||2)})})},tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t};return Object(b.a)(Object(b.g)("maskConfig","setMaskConfig"),Object(b.g)("cutouts","setCutouts",{}),Object(b.e)({handleAnimatonEnterStart:function(t){var e=t.cutouts;return function(t){var n=t.id,o=e[n];o.animation&&"none"!==o.animation.toLowerCase()||z.render()}},handleAnimatonEnterEnd:function(){return function(t){t.id,z.render()}},handleAnimatonExitEnd:function(){return function(t){t.id}},handleMaskInit:function(){return function(t){z=t}},setupCutouts:function(t){var e=t.setCutouts,n=t.cutouts;return function(t){var o=t.map(function(t){return Object(s.a)({},n[t.id]||{},t,{scanFeedback:Object(s.a)({},n[t.id]&&n[t.id].scanFeedback||{},t.scanFeedback||{},{elements:[]}),lastUpdate:Date.now(),visible:t.visible||n[t.id].visible})}),r=O(function(t){return t}(o),"id");e(function(t){return Object(s.a)({},t,r)})}},updateFeedback:function(t){var e=t.setCutouts,n=t.cutouts;return function(t){var o=Object.entries(t).filter(function(t){var e=Object(d.a)(t,2),o=e[0],r=e[1];return n[o]&&r.length}).map(function(t){var e=Object(d.a)(t,2),o=e[0],r=e[1];return Object(s.a)({},n[o],{scanFeedback:Object(s.a)({},n[o].scanFeedback,{lastFeedbackUpdate:Date.now(),elements:X(n[o],K($(r),$(n[o].scanFeedback.elements)))})})}),r=O(o,"id");e(function(t){return Object(s.a)({},t,r)})}},removeCutouts:function(t){var e=t.setCutouts,n=t.cutouts;return function(t){var o=function(t,e){var n=e.map(function(t){return t.toString()});return Object.entries(t).reduce(function(t,e){var o=Object(d.a)(e,2),r=o[0],i=o[1];return n.includes(r)?t:Object(s.a)({},t,Object(g.a)({},r,i))},{})}(n,t);e(o)}}}),t,Object(b.f)(function(t){var e=t.cutouts,n=Object.values(e).filter(V);return{cutouts:O(n,"id")}}),Object(b.c)({componentDidMount:function(){window.setMaskConfig=this.props.setMaskConfig,_=w.subscribe("setupMask",this.props.setMaskConfig),window.setupCutouts=this.props.setupCutouts,R=w.subscribe("setupCutouts",this.props.setupCutouts),window.updateFeedback=this.props.updateFeedback,T=w.subscribe("updateFeedback",h()(this.props.updateFeedback,25)),window.removeCutouts=this.props.removeCutouts,P=w.subscribe("removeCutouts",this.props.removeCutouts)},componentWillUnmount:function(){_.unsubscribe(),R.unsubscribe(),P.unsubscribe(),T.unsubscribe()}}),Object(b.d)(Z))}()(function(t){var e=t.cutouts,n=t.maskConfig,o=t.handleMaskInit,r=t.handleAnimatonEnterEnd,a=t.handleAnimatonExitEnd,c=t.handleAnimatonEnterStart;return i.a.createElement(Y,null,i.a.createElement(J,Object.assign({},n,{cutouts:e,onInit:o})),i.a.createElement(m.a,null,Object.values(e).map(function(t){return i.a.createElement(S,Object.assign({onEntered:r,onEnter:c,onExited:a,classNames:t.animation?t.animation.toLowerCase():"",key:"Cutout_".concat(t.id)},t))})))}),et=u.a.div.withConfig({displayName:"App__Wrapper",componentId:"sc-1wz7824-0"})(["width:100vw;height:100vh;"]),nt=function(){return i.a.createElement(et,null,i.a.createElement(tt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ot=n(65),rt=n.n(ot),it=n(163),at=n(64),ct=function(t){return new Promise(function(e){return setTimeout(e,t)})};function ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=Object(at.a)(t);return{getFeedbacks:function(){return e},set:function(t){return e=Object(at.a)(t)},add:function(t){return e=[].concat(Object(at.a)(e),[t])}}}function st(){return(st=Object(it.a)(rt.a.mark(function t(){var e,n,o,r,i,a,c,u,d,l,f,p=arguments;return rt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=p.length>0&&void 0!==p[0]?p[0]:{},n=e.setupCutoutsConfig,o=void 0===n?{}:n,r=e.feedbackCount,i=void 0===r?8:r,window.publish("setupMask",{outerColor:"000000",outerAlpha:.3}),window.publish("setupCutouts",[Object(s.a)({scanFeedback:{animation:"RESIZE",redrawTimeout:0,fillColor:"220099FF",strokeWidth:2,strokeColor:"FF0099FF",cornerRadius:4,feedbackStyle:"contour_point",animationDuration:1e3},feedbackStrokeColor:"FF0099FF",id:"1",visible:1,animation:"none",rect:{bottom:210,top:110,left:150,right:250},strokeWidth:2,cornerRadius:20,strokeColor:"FFFFFFFF"},o)]),a=function(t,e){return Object(s.a)({},t,e)},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return Math.floor(Math.random()*e)+t},u=Array.apply(void 0,Object(at.a)(Array(i))).map(function(t,e){return{y:250,x:c(1,1200),width:14.351851267873542,height:20.833332485622833}}),d=ut(u),f=rt.a.mark(function t(){var e,n;return rt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.time("loop"),e=400-2*l,n=d.set(u.map(function(t){return a(t,{y:e})})),window.publish("updateFeedback",{1:n}),console.timeEnd("loop"),t.next=7,ct(30);case 7:case"end":return t.stop()}},t,this)}),l=0;case 9:if(!(l<=100)){t.next=14;break}return t.delegateYield(f(),"t0",11);case 11:l+=1,t.next=9;break;case 14:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}window.runFeedbackBenchmark=function(){return st.apply(this,arguments)};n(384);c.a.render(i.a.createElement(nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},55:function(t,e,n){"use strict";function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt(t.slice(0,2),16),o=parseInt(t.slice(2,4),16),r=parseInt(t.slice(4,6),16);return"rgba(".concat(n,", ").concat(o,", ").concat(r,", ").concat(e,")")}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t=t.replace("#",""),![6,8].includes(t.length))throw Error("invalid hey HexARGB string use length of 6 or 8");if(6===t.length){var e=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);return"rgb(".concat(e,", ").concat(n,", ").concat(o,")")}if(8===t.length){var r=parseInt(t.substring(0,2),16)/255,i=parseInt(t.substring(2,4),16),a=parseInt(t.substring(4,6),16),c=parseInt(t.substring(6,8),16);return"rgba(".concat(i,", ").concat(a,", ").concat(c,", ").concat(r,")")}}n.d(e,"b",function(){return o}),n.d(e,"a",function(){return r})}},[[164,4,2]]]);